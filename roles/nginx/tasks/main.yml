- name: "Install packages"
  dnf:
    name: nginx
    state: latest

- name: "Start and enable services"
  systemd:
    name: nginx
    state: started
    enabled: yes

# - name: "Create sites-enabled and sites-available"
#   file:
#     path: "{{ item }}"
#     state: directory
#   with_items:
#     - /etc/nginx/sites-available
#     - /etc/nginx/sites-enabled

# - name: "Include sites in nginx.conf"
#   lineinfile:
#     path: /etc/nginx/nginx.conf
#     line: "include /etc/nginx/sites-enabled/*;"
#     state: present
#     insertbefore: "server {"